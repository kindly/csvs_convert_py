<!doctype html>
<html class="no-js">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />
<link rel="index" title="Index" href="genindex.html" /><link rel="search" title="Search" href="search.html" /><link rel="next" title="To Sqlite" href="sqlite.html" />

    <meta name="generator" content="sphinx-4.5.0, furo 2022.04.07"/>
        <title>CSVs Convert 0.7 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo.css?digest=68f4518137b9aefe99b631505a2064c3c42c9852" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo-extensions.css?digest=30d1aed668e5c3a91c3e3bf6a60b675221979f0e" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="#"><div class="brand">CSVs Convert 0.7 documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="#">
  
  
  <span class="sidebar-brand-text">CSVs Convert 0.7 documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="search.html" role="search">
  <input class="sidebar-search" placeholder=Search name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul>
<li class="toctree-l1"><a class="reference internal" href="sqlite.html">To Sqlite</a></li>
<li class="toctree-l1"><a class="reference internal" href="postgres.html">To Postgres</a></li>
<li class="toctree-l1"><a class="reference internal" href="parquet.html">To Parquet</a></li>
<li class="toctree-l1"><a class="reference internal" href="xlsx.html">To XLSX</a></li>
<li class="toctree-l1"><a class="reference internal" href="options.html">Options</a></li>
<li class="toctree-l1"><a class="reference internal" href="evolve.html">Evolve</a></li>
<li class="toctree-l1"><a class="reference internal" href="merge.html">Merge</a></li>
<li class="toctree-l1"><a class="reference internal" href="changelog.html">Change Log</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container"><div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          <section id="csvs-convert">
<h1>CSVS Convert<a class="headerlink" href="#csvs-convert" title="Permalink to this headline">#</a></h1>
<p>Converts CSV files into XLSX/SQLITE/POSTGRESQL/PARQUET fast.</p>
<section id="aims">
<h2>Aims<a class="headerlink" href="#aims" title="Permalink to this headline">#</a></h2>
<ul class="simple">
<li><p>Thorough type guessing of CSV columns, so there is no need to configure types of each column. Scans whole file first to make sure all types in a column are consistent.</p></li>
<li><p>Quick conversions (uses rust underneath). Uses fast methods for each output format.</p></li>
<li><p>Tries to limit errors when inserting data into database by resorting to “text” if type guessing can’t determine a more specific type.</p></li>
<li><p>When inserting into existing databases automatically change schema of target to allow new data (<code class="docutils literal notranslate"><span class="pre">evolve</span></code> option).</p></li>
<li><p>Memory efficient. All csvs and outputs are streamed so all conversions should take up very little memory.</p></li>
<li><p>Gather stats and information about CSV files into datapacakge.json file and can use it for customizing conversion.</p></li>
</ul>
</section>
<section id="drawbacks">
<h2>Drawbacks<a class="headerlink" href="#drawbacks" title="Permalink to this headline">#</a></h2>
<ul class="simple">
<li><p>CSV files currently need header rows.</p></li>
<li><p>Whole file needs to be on disk as whole CSV is analyzed.</p></li>
</ul>
</section>
<section id="conversion-docs">
<h2>Conversion Docs<a class="headerlink" href="#conversion-docs" title="Permalink to this headline">#</a></h2>
<p>Conversions for CSV files:</p>
<ul class="simple">
<li><p><a class="reference internal" href="sqlite.html"><span class="doc std std-doc">To SQLite</span></a></p></li>
<li><p><a class="reference internal" href="postgres.html"><span class="doc std std-doc">To Postgres</span></a></p></li>
<li><p><a class="reference internal" href="parquet.html"><span class="doc std std-doc">To Parquet</span></a></p></li>
<li><p><a class="reference internal" href="xlsx.html"><span class="doc std std-doc">To XLSX</span></a></p></li>
<li><p><a class="reference internal" href="merge.html"><span class="doc std std-doc">Merge multiple csv datapackages into one</span></a></p></li>
</ul>
<p><strong><a class="reference internal" href="options.html"><span class="doc std std-doc">Full Option Reference</span></a></strong></p>
<p>This is the python library, providing bindings to the <a class="reference external" href="https://github.com/kindly/csvs_convert">rust library</a>.</p>
<p><a class="reference external" href="https://github.com/kindly/csvs_convert_py"><strong>Contribute on github</strong></a></p>
</section>
<section id="install">
<h2>Install<a class="headerlink" href="#install" title="Permalink to this headline">#</a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pip install csvs_convert
</pre></div>
</div>
</section>
<section id="usage-from-csv-files">
<h2>Usage From CSV files.<a class="headerlink" href="#usage-from-csv-files" title="Permalink to this headline">#</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">csvs_convert</span>

<span class="c1">#sqlite</span>
<span class="n">csvs_convert</span><span class="o">.</span><span class="n">csvs_to_sqlite</span><span class="p">(</span><span class="s2">"sqlite.db"</span><span class="p">,</span> <span class="p">[</span><span class="s2">"file.csv"</span><span class="p">])</span>
<span class="c1">#postgres</span>
<span class="n">csvs_convert</span><span class="o">.</span><span class="n">csvs_to_postgres</span><span class="p">(</span><span class="s2">"postgresql://user:postgres@localhost/db"</span><span class="p">,</span> <span class="p">[</span><span class="s2">"file.csv"</span><span class="p">])</span>
<span class="c1">#parquet</span>
<span class="n">csvs_convert</span><span class="o">.</span><span class="n">csvs_to_parquet</span><span class="p">(</span><span class="s2">"output"</span><span class="p">,</span> <span class="p">[</span><span class="s2">"file.csv"</span><span class="p">])</span>
<span class="c1">#xlsx</span>
<span class="n">csvs_convert</span><span class="o">.</span><span class="n">csvs_to_xlsx</span><span class="p">(</span><span class="s2">"output.xlsx"</span><span class="p">,</span> <span class="p">[</span><span class="s2">"sqlite.db"</span><span class="p">])</span>
</pre></div>
</div>
</section>
<section id="usage-from-datapackage">
<h2>Usage from datapackage<a class="headerlink" href="#usage-from-datapackage" title="Permalink to this headline">#</a></h2>
<p>A datapackage is a file that contains metadata about the tables its specification is described <a class="reference external" href="https://datahub.io/docs/data-packages/tabular">here</a>.</p>
<p>To generate <code class="docutils literal notranslate"><span class="pre">datapackage.json</span></code> file you can use:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">csvs_convert</span><span class="o">.</span><span class="n">csvs_to_datapackage</span><span class="p">(</span><span class="s1">'path/to/datapackage.json'</span><span class="p">,</span> <span class="p">[</span><span class="s2">"fixtures/large/csv/data.csv"</span><span class="p">])</span>
</pre></div>
</div>
<p>Also the other <code class="docutils literal notranslate"><span class="pre">csvs_to_*</span></code> commands return the datapackagage as a python dict eg:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="n">datapackage</span> <span class="o">=</span> <span class="n">csvs_convert</span><span class="o">.</span><span class="n">csvs_to_xlsx</span><span class="p">(</span><span class="s2">"output.xlsx"</span><span class="p">,</span> <span class="p">[</span><span class="s2">"sqlite.db"</span><span class="p">])</span>
</pre></div>
</div>
<p>You can use this file and alter it as needed. Mostly it is useful if you want to use the same schema across multiple files, as it will save time not having to do the type guessing for every file.</p>
<p>When referring to a datapackage you can either reference:</p>
<ul class="simple">
<li><p>A <code class="docutils literal notranslate"><span class="pre">datapackage.json</span></code> file.</p></li>
<li><p>A datapackage directory containing a <code class="docutils literal notranslate"><span class="pre">datapackage.json</span></code> file. e.g.  <code class="docutils literal notranslate"><span class="pre">/a/datapackage/dir</span></code></p></li>
<li><p>A zip file containing a <code class="docutils literal notranslate"><span class="pre">datapackage.json</span></code> file. e.g. <code class="docutils literal notranslate"><span class="pre">my_datapackage.zip</span></code></p></li>
</ul>
<section id="examples">
<h3>Examples:<a class="headerlink" href="#examples" title="Permalink to this headline">#</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">csvs_convert</span>

<span class="c1">#sqlite</span>
<span class="n">csvs_convert</span><span class="o">.</span><span class="n">datapackage_to_sqlite</span><span class="p">(</span><span class="s2">"sqlite.db"</span><span class="p">,</span> <span class="s2">"path/to/datapackage.json"</span><span class="p">)</span>
<span class="c1">#postgres</span>
<span class="n">csvs_convert</span><span class="o">.</span><span class="n">datapackage_to_postgres</span><span class="p">(</span><span class="s2">"postgresql://user:postgres@localhost/db"</span><span class="p">,</span> <span class="s2">"path/to/datapackage.json"</span><span class="p">)</span>
<span class="c1">#parquet</span>
<span class="n">csvs_convert</span><span class="o">.</span><span class="n">datapackage_to_parquet</span><span class="p">(</span><span class="s2">"path/to/directory"</span><span class="p">,</span> <span class="p">[</span><span class="s2">"sqlite.db"</span><span class="p">])</span>
<span class="c1">#xlsx</span>
<span class="n">csvs_convert</span><span class="o">.</span><span class="n">datapackage_to_xlsx</span><span class="p">(</span><span class="s2">"output.xlsx"</span><span class="p">,</span> <span class="s2">"path/to/datapackage.json"</span><span class="p">)</span>
</pre></div>
</div>
<div class="toctree-wrapper compound">
</div>
</section>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="sqlite.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">To Sqlite</div>
              </div>
              <svg><use href="#svg-arrow-right"></use></svg>
            </a>
          
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2021-2022, David Raznick
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            <div class="icons">
              
            </div>
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            Contents
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">CSVS Convert</a><ul>
<li><a class="reference internal" href="#aims">Aims</a></li>
<li><a class="reference internal" href="#drawbacks">Drawbacks</a></li>
<li><a class="reference internal" href="#conversion-docs">Conversion Docs</a></li>
<li><a class="reference internal" href="#install">Install</a></li>
<li><a class="reference internal" href="#usage-from-csv-files">Usage From CSV files.</a></li>
<li><a class="reference internal" href="#usage-from-datapackage">Usage from datapackage</a><ul>
<li><a class="reference internal" href="#examples">Examples:</a></li>
</ul>
</li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/scripts/furo.js"></script>
    </body>
</html>